(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dcfa3224"],{"07ac":function(t,i,e){var n=e("23e7"),a=e("6f53").values;n({target:"Object",stat:!0},{values:function(t){return a(t)}})},"3cb2":function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("component-layout",{attrs:{component:t.component,length:t.length,loading:t.loading},on:{"update:component":function(i){t.component=i},"update:length":function(i){t.length=i},"update:loading":function(i){t.loading=i}}},[e("b-form",{staticClass:"form-toolbar-rtl",attrs:{inline:""}},[e("b-button",{attrs:{size:"badge",disabled:t.plugActionDisabled},on:{click:t.plugAction}},[e("b-icon",{staticClass:"btn-icon",attrs:{icon:"plug"}})],1),e("b-button",{attrs:{size:"badge",disabled:t.trashActionDisabled},on:{click:t.trashAction}},[e("b-icon",{staticClass:"btn-icon",attrs:{icon:"trash"}})],1),e("b-button",{attrs:{size:"badge",disabled:t.imageActionDisabled},on:{click:function(i){return t.$bvModal.show("model-view-"+t.component.index)}}},[e("b-icon",{staticClass:"btn-icon",attrs:{icon:"card-image"}})],1),e("b-button",{attrs:{size:"badge"},on:{click:t.onToggleToolbar}},[e("b-icon",{attrs:{icon:t.toggleIcon}})],1)],1),e("b-collapse",{attrs:{visible:"caret-up"===t.toggleIcon}},[e("b-form",{attrs:{inline:""}},[e("div",{staticClass:"indexInput"},[e("label",[t._v(" Input Units "),t.unitsActionDisabled?t._e():e("span",[t._v("("+t._s(t.inputSize)+")")])]),e("b-dropdown",{attrs:{text:t.unitsActionDisabled?"datasetImages":"Columns","no-flip":"",split:"","split-variant":"outline-secondary",block:"",variant:"secondary",disabled:t.editActionDisabled||t.unitsActionDisabled}},[e("b-dropdown-form",{staticStyle:{"text-align":"left"}},[t._l(t.inputUnits,(function(i){return[e("b-form",{key:i.key,attrs:{inline:""}},[e("b-form-checkbox",{attrs:{options:[!0,!1]},model:{value:i.checked,callback:function(e){t.$set(i,"checked",e)},expression:"item.checked"}}),t._v(" "+t._s(i.label)+" ")],1)]}))],2)],1)],1),e("div",{staticClass:"indexInput"},[e("label",[t._v("Input Units Normalize")]),e("b-form-select",{attrs:{options:[!0,!1],disabled:t.editActionDisabled},model:{value:t.inputUnitsNormalize,callback:function(i){t.inputUnitsNormalize=i},expression:"inputUnitsNormalize"}})],1),e("div",{staticClass:"indexInput"},[e("label",[t._v(" Output Units "),t.unitsActionDisabled?t._e():e("span",[t._v("("+t._s(t.outputSize)+")")])]),e("b-dropdown",{attrs:{text:t.unitsActionDisabled?"datasetLabels":"Columns","no-flip":"",split:"","split-variant":"outline-secondary",block:"",variant:"secondary",disabled:t.editActionDisabled||t.unitsActionDisabled}},[e("b-dropdown-form",{staticStyle:{"text-align":"left"}},[t._l(t.outputUnits,(function(i){return[e("b-form",{key:i.key,attrs:{inline:""}},[e("b-form-checkbox",{attrs:{options:[!0,!1]},model:{value:i.checked,callback:function(e){t.$set(i,"checked",e)},expression:"item.checked"}}),t._v(" "+t._s(i.label)+" ")],1)]}))],2)],1)],1),e("div",{staticClass:"indexInput"},[e("label",[t._v("Output Units Normalize")]),e("b-form-select",{attrs:{options:[!0,!1],disabled:t.editActionDisabled},model:{value:t.outputUnitsNormalize,callback:function(i){t.outputUnitsNormalize=i},expression:"outputUnitsNormalize"}})],1)]),e("b-form",{attrs:{inline:""}},[e("div",{staticClass:"indexInput"},[e("label",[t._v("Epochs")]),e("b-form-spinbutton",{attrs:{min:"1",placeholder:"--",disabled:t.editActionDisabled},model:{value:t.epochSize,callback:function(i){t.epochSize=i},expression:"epochSize"}})],1),e("div",{staticClass:"indexInput"},[e("label",[t._v("Batch Size")]),e("b-form-spinbutton",{attrs:{min:"1",placeholder:"--",disabled:t.editActionDisabled},model:{value:t.batchSize,callback:function(i){t.batchSize=i},expression:"batchSize"}})],1),e("div",{staticClass:"indexInput"},[e("label",[t._v("Validation Split")]),e("b-form-spinbutton",{attrs:{min:"0.0",max:"1.0",step:"0.01","formatter-fn":t.percentageFormatter,disabled:t.editActionDisabled},model:{value:t.validationSplit,callback:function(i){t.validationSplit=i},expression:"validationSplit"}})],1),e("div",{staticClass:"indexInput"},[e("label",[t._v("Shuffle")]),e("b-form-select",{attrs:{options:[!0,!1],disabled:t.editActionDisabled},model:{value:t.shuffle,callback:function(i){t.shuffle=i},expression:"shuffle"}})],1)]),e("b-form",{attrs:{inline:""}},[e("div",{staticClass:"indexInput"},[e("label",[t._v("Compiler Optimizer")]),e("b-form-select",{attrs:{options:t.compilerOptimizerOptions,disabled:t.editActionDisabled},model:{value:t.compilerOptimizerSelected,callback:function(i){t.compilerOptimizerSelected=i},expression:"compilerOptimizerSelected"}})],1),e("div",{staticClass:"indexInput"},[e("label",[t._v("Compiler Loss")]),e("b-form-select",{attrs:{options:t.compilerLossOptions,disabled:t.editActionDisabled},model:{value:t.compilerLossSelected,callback:function(i){t.compilerLossSelected=i},expression:"compilerLossSelected"}})],1)])],1),e("div",{staticStyle:{"margin-top":"8px"}}),e("b-modal",{attrs:{id:"model-view-"+t.component.index,title:"TS Model View",static:!0,"hide-footer":!0,size:"lg"}},[e("div",{ref:"draw"})])],1)},a=[],s=(e("4de4"),e("b0c0"),e("d3b7"),e("07ac"),e("3ca3"),e("4c53"),e("ddb0"),e("2b3d"),e("5530")),o=e("315f"),l=e("cc8f"),r=e("1157"),c=e.n(r),u=e("c8cf"),d={name:"TSModelCompiler",components:{ComponentLayout:o["a"]},mixins:[l["a"]],data:function(){var t={serializable:["shuffle","epochSize","batchSize","validationSplit","inputUnits","inputUnitsNormalize","outputUnits","outputUnitsNormalize","compilerOptimizerSelected","compilerLossSelected"],toggleIcon:"caret-up",shuffle:!0,epochSize:0,batchSize:0,validationSplit:0,inputUnits:[],inputUnitsNormalize:!1,outputUnits:[],outputUnitsNormalize:!1,compilerOptimizerSelected:null,compilerOptimizerOptions:u["tf"].train.options,compilerLossSelected:null,compilerLossOptions:u["tf"].losses.options,fileChart:!1};return this.importData(t)},computed:{unitsActionDisabled:function(){var t=0;if(t|=!0===this.loading,null!==this.inputData&&"data"in this.inputData){var i=this.inputData.data;t|="datasetImages"in i&&"datasetLabels"in i}return 1===t},editActionDisabled:function(){var t=0;return t|=!0===this.loading,t|=0===this.inputSize,t|=0===this.outputSize,1===t},trashActionDisabled:function(){return this.editActionDisabled},plugActionDisabled:function(){var t=0;return t|=!0===this.loading,this.unitsActionDisabled||null===this.inputData||(t|=this.inputUnits.filter((function(t){return!0===t.checked})).length!==this.inputSize,t|=this.outputUnits.filter((function(t){return!0===t.checked})).length!==this.outputSize),1===t},imageActionDisabled:function(){var t=0;return t|=!1===this.fileChart,1===t},inputSize:function(){var t=0;return this.inputData&&this.inputData.model&&this.inputData.model.layers&&this.inputData.model.layers.length>1&&(t=this.inputData.model.layers[0].batchInputShape[1]),t},outputSize:function(){var t=0;return this.inputData&&this.inputData.model&&this.inputData.model.layers&&this.inputData.model.layers.length>1&&(t=this.inputData.model.layers[this.inputData.model.layers.length-1].units),t},dataSize:function(){var t=0;return this.inputData&&this.inputData.data&&this.inputData.data.length&&(t=this.inputData.data[0].length),t}},watch:{inputLoading:function(t,i){!1===t&&this.trashAction()},loading:function(t,i){!1===t&&(delete this.$options.sockets.onerror,delete this.$options.sockets.onopen,delete this.$options.sockets.onmessage,delete this.$options.sockets.onclose)}},methods:{onToggleToolbar:function(){"caret-up"===this.toggleIcon?this.toggleIcon="caret-down":"caret-down"===this.toggleIcon&&(this.toggleIcon="caret-up")},trashAction:function(t){var i=this;if(c()(this.$refs["draw"]).empty(),this.fileChart=!1,this.output=null,this.loadData(this.data),this.loadData(this.component.data),this.inputData&&this.inputData.data&&this.inputData.data.length)for(var e=function(t){0===i.inputUnits.filter((function(i){return i.key===t})).length&&i.inputUnits.push({key:t,checked:!1,label:"Column "+t}),0===i.outputUnits.filter((function(i){return i.key===t})).length&&i.outputUnits.push({key:t,checked:!1,label:"Column "+t})},n=0;n<this.dataSize;n++)e(n)},plugAction:function(t){var i=this;this.loading=!0;var e=this.inputData,n=e.model,a=e.data,o=null,l=null,r=null,c=null,u={inputUnitsNormalize:this.inputUnitsNormalize,outputUnitsNormalize:this.outputUnitsNormalize};if("datasetImages"in a){r=a["datasetImages"];var d=a.spriteWidth*a.spriteHeight*a.spriteChannels,p=parseInt(r.length/d),h=this.$tf.tensor2d(r,[p,d]);o=h.reshape([p,a.spriteWidth,a.spriteHeight,a.spriteChannels])}else{r=[];for(var b=0;b<a.length;b++){for(var f=[],m=function(t){i.inputUnits.filter((function(i){return i.key===t&&!0===i.checked})).length&&f.push(parseFloat(a[b][t]))},v=0;v<this.dataSize;v++)m(v);r.push(f)}o=this.$tf.tensor2d(r)}if("datasetLabels"in a){c=a["datasetLabels"];var g=a["datasetLabelsSize"],z=parseInt(c.length/g);l=this.$tf.tensor2d(c,[z,g])}else{c=[];for(var D=0;D<a.length;D++){for(var k=[],S=function(t){i.outputUnits.filter((function(i){return i.key===t&&!0===i.checked})).length&&k.push(parseFloat(a[D][t]))},x=0;x<this.dataSize;x++)S(x);c.push(k)}l=this.$tf.tensor2d(c)}if(this.inputUnitsNormalize){var U=o.max(),y=o.min(),w=o.sub(y).div(U.sub(y));o=w,u.inputMax=U,u.inputMin=y}if(this.outputUnitsNormalize){var A=l.max(),C=l.min(),O=l.sub(C).div(A.sub(C));l=O,u.outputMax=A,u.outputMin=C}var $=this.$tfvis.show.fitCallbacks(this.$refs["draw"],["loss","mse"],{width:700,height:200,callbacks:["onEpochEnd"]}),I=o.dataSync(),_={data:{type:I.constructor.name,data:Object.values(I)},shape:o.shape},N=l.dataSync(),L={data:{type:N.constructor.name,data:Object.values(N)},shape:l.shape};this.$options.sockets.onerror=function(){var t=new Worker("worker.js");t.onmessage=function(i){if("onEnd"===i.data[0]&&i.error)this.loading=!1,t.terminate();else if("onEnd"===i.data[0]){var e=i.data[1];this.$tf.loadLayersModel("indexeddb://model").then(function(i){this.inputData.model=i,this.output=Object(s["a"])(Object(s["a"])({},this.inputData),{},{train:e,inputTensorJSON:_,outputTensorJSON:L,normalizationData:u}),this.loading=!1,t.terminate()}.bind(this))}else this.fileChart=!0,$[i.data[0]](i.data[1],i.data[2])}.bind(this),n.save("indexeddb://model").then(function(){t.postMessage(["compiler",this.$data,_,L]),o.dispose(),l.dispose()}.bind(this))}.bind(this),this.$options.sockets.onopen=function(){n.save(this.$tf.io.browserHTTPRequest("./api/model")).then(function(){this.$socket.sendObj({data:["compiler",this.$data,_,L]})}.bind(this))}.bind(this),this.$options.sockets.onmessage=function(t){var i=JSON.parse(t.data);if("onEnd"===i.data[0]){var e=i.data[1];this.$tf.loadLayersModel("./api/model/model.json").then(function(t){this.inputData.model=t,this.output=Object(s["a"])(Object(s["a"])({},this.inputData),{},{train:e,inputTensorJSON:_,outputTensorJSON:L,normalizationData:u}),this.$disconnect()}.bind(this))}else this.fileChart=!0,$[i.data[0]](i.data[1],i.data[2])}.bind(this),this.$options.sockets.onclose=function(){this.loading=!1}.bind(this);var T=new URL("ws://localhost:8001").hostname,j=new URL(window.location.href).hostname;T===j?this.$connect():this.$options.sockets.onerror()}}},p=d,h=e("2877"),b=Object(h["a"])(p,n,a,!1,null,"39815025",null);i["default"]=b.exports},"4c53":function(t,i,e){"use strict";var n=e("23e7"),a=e("857a"),s=e("af03");n({target:"String",proto:!0,forced:s("sub")},{sub:function(){return a(this,"sub","","")}})},"6f53":function(t,i,e){var n=e("83ab"),a=e("df75"),s=e("fc6a"),o=e("d1e7").f,l=function(t){return function(i){var e,l=s(i),r=a(l),c=r.length,u=0,d=[];while(c>u)e=r[u++],n&&!o.call(l,e)||d.push(t?[e,l[e]]:l[e]);return d}};t.exports={entries:l(!0),values:l(!1)}},"857a":function(t,i,e){var n=e("1d80"),a=/"/g;t.exports=function(t,i,e,s){var o=String(n(t)),l="<"+i;return""!==e&&(l+=" "+e+'="'+String(s).replace(a,"&quot;")+'"'),l+">"+o+"</"+i+">"}},af03:function(t,i,e){var n=e("d039");t.exports=function(t){return n((function(){var i=""[t]('"');return i!==i.toLowerCase()||i.split('"').length>3}))}}}]);
//# sourceMappingURL=chunk-dcfa3224.e978c9e4.js.map