(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-066aa483"],{6062:function(t,i,e){"use strict";var n=e("6d61"),s=e("6566");t.exports=n("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),s)},6566:function(t,i,e){"use strict";var n=e("9bf2").f,s=e("7c73"),o=e("e2cc"),a=e("0366"),r=e("19aa"),l=e("2266"),u=e("7dd0"),c=e("2626"),h=e("83ab"),d=e("f183").fastKey,p=e("69f3"),f=p.set,g=p.getterFor;t.exports={getConstructor:function(t,i,e,u){var c=t((function(t,n){r(t,c,i),f(t,{type:i,index:s(null),first:void 0,last:void 0,size:0}),h||(t.size=0),void 0!=n&&l(n,t[u],t,e)})),p=g(i),v=function(t,i,e){var n,s,o=p(t),a=b(t,i);return a?a.value=e:(o.last=a={index:s=d(i,!0),key:i,value:e,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=a),n&&(n.next=a),h?o.size++:t.size++,"F"!==s&&(o.index[s]=a)),t},b=function(t,i){var e,n=p(t),s=d(i);if("F"!==s)return n.index[s];for(e=n.first;e;e=e.next)if(e.key==i)return e};return o(c.prototype,{clear:function(){var t=this,i=p(t),e=i.index,n=i.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;i.first=i.last=void 0,h?i.size=0:t.size=0},delete:function(t){var i=this,e=p(i),n=b(i,t);if(n){var s=n.next,o=n.previous;delete e.index[n.index],n.removed=!0,o&&(o.next=s),s&&(s.previous=o),e.first==n&&(e.first=s),e.last==n&&(e.last=o),h?e.size--:i.size--}return!!n},forEach:function(t){var i,e=p(this),n=a(t,arguments.length>1?arguments[1]:void 0,3);while(i=i?i.next:e.first){n(i.value,i.key,this);while(i&&i.removed)i=i.previous}},has:function(t){return!!b(this,t)}}),o(c.prototype,e?{get:function(t){var i=b(this,t);return i&&i.value},set:function(t,i){return v(this,0===t?0:t,i)}}:{add:function(t){return v(this,t=0===t?0:t,t)}}),h&&n(c.prototype,"size",{get:function(){return p(this).size}}),c},setStrong:function(t,i,e){var n=i+" Iterator",s=g(i),o=g(n);u(t,i,(function(t,i){f(this,{type:n,target:t,state:s(t),kind:i,last:void 0})}),(function(){var t=o(this),i=t.kind,e=t.last;while(e&&e.removed)e=e.previous;return t.target&&(t.last=e=e?e.next:t.state.first)?"keys"==i?{value:e.key,done:!1}:"values"==i?{value:e.value,done:!1}:{value:[e.key,e.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),e?"entries":"values",!e,!0),c(i)}}},"6d61":function(t,i,e){"use strict";var n=e("23e7"),s=e("da84"),o=e("94ca"),a=e("6eeb"),r=e("f183"),l=e("2266"),u=e("19aa"),c=e("861d"),h=e("d039"),d=e("1c7e"),p=e("d44e"),f=e("7156");t.exports=function(t,i,e){var g=-1!==t.indexOf("Map"),v=-1!==t.indexOf("Weak"),b=g?"set":"add",x=s[t],m=x&&x.prototype,y=x,T={},k=function(t){var i=m[t];a(m,t,"add"==t?function(t){return i.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(v&&!c(t))&&i.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!c(t)?void 0:i.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!c(t))&&i.call(this,0===t?0:t)}:function(t,e){return i.call(this,0===t?0:t,e),this})};if(o(t,"function"!=typeof x||!(v||m.forEach&&!h((function(){(new x).entries().next()})))))y=e.getConstructor(i,t,g,b),r.REQUIRED=!0;else if(o(t,!0)){var M=new y,w=M[b](v?{}:-0,1)!=M,A=h((function(){M.has(1)})),z=d((function(t){new x(t)})),D=!v&&h((function(){var t=new x,i=5;while(i--)t[b](i,i);return!t.has(-0)}));z||(y=i((function(i,e){u(i,y,t);var n=f(new x,i,y);return void 0!=e&&l(e,n[b],n,g),n})),y.prototype=m,m.constructor=y),(A||D)&&(k("delete"),k("has"),g&&k("get")),(D||w)&&k(b),v&&m.clear&&delete m.clear}return T[t]=y,n({global:!0,forced:y!=x},T),p(y,t),v||e.setStrong(y,t,g),y}},7156:function(t,i,e){var n=e("861d"),s=e("d2bb");t.exports=function(t,i,e){var o,a;return s&&"function"==typeof(o=i.constructor)&&o!==e&&n(a=o.prototype)&&a!==e.prototype&&s(t,a),t}},a630:function(t,i,e){var n=e("23e7"),s=e("4df4"),o=e("1c7e"),a=!o((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:a},{from:s})},bb2f:function(t,i,e){var n=e("d039");t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},dd11:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("component-layout",{attrs:{component:t.component,length:t.length,loading:t.loading},on:{"update:component":function(i){t.component=i},"update:length":function(i){t.length=i},"update:loading":function(i){t.loading=i}}},[e("b-form",{staticClass:"form-toolbar-rtl",attrs:{inline:""}},[e("b-button",{attrs:{size:"badge",disabled:t.plugActionDisabled},on:{click:t.plugAction}},[e("b-icon",{staticClass:"btn-icon",attrs:{icon:"plug"}})],1),e("b-button",{attrs:{size:"badge",disabled:t.trashActionDisabled},on:{click:t.trashAction}},[e("b-icon",{staticClass:"btn-icon",attrs:{icon:"trash"}})],1),e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"dataset-view-"+t.component.index,expression:"'dataset-view-' + component.index"}],attrs:{size:"badge",disabled:t.imageActionDisabled}},[e("b-icon",{staticClass:"btn-icon",attrs:{icon:"card-image"}})],1),e("b-button",{attrs:{size:"badge"},on:{click:t.onToggleToolbar}},[e("b-icon",{attrs:{icon:t.toggleIcon}})],1)],1),e("b-collapse",{attrs:{visible:"caret-up"===t.toggleIcon}},[e("b-form",{attrs:{inline:""}},[e("div",{staticClass:"indexInput"},[e("label",[t._v("Total Layers")]),e("b-form-spinbutton",{attrs:{min:"1",max:t.indexMax,placeholder:"--",disabled:t.editActionDisabled},model:{value:t.layerSize,callback:function(i){t.layerSize=i},expression:"layerSize"}})],1)])],1),e("div",{staticStyle:{"margin-top":"8px"}}),e("b-modal",{attrs:{id:"dataset-view-"+t.component.index,title:"Dataset View",static:!0,"hide-footer":!0,size:"lg"}},[e("b-carousel",{attrs:{interval:0,indicators:!0}},[t.scatterplot?e("b-carousel-slide",{attrs:{"img-blank":!0},scopedSlots:t._u([{key:"img",fn:function(){return[e("div",{ref:"scatterplot"})]},proxy:!0}],null,!1,2404327824)}):t._e(),t.perClassAccuracy?e("b-carousel-slide",{attrs:{"img-blank":!0},scopedSlots:t._u([{key:"img",fn:function(){return[e("div",{ref:"perClassAccuracy"})]},proxy:!0}],null,!1,3153054725)}):t._e(),t.confusionMatrix?e("b-carousel-slide",{attrs:{"img-blank":!0},scopedSlots:t._u([{key:"img",fn:function(){return[e("div",{ref:"confusionMatrix"})]},proxy:!0}],null,!1,3258938016)}):t._e()],1),e("footer",{staticClass:"modal-footer"})],1)],1)},s=[],o=e("e04e"),a=o["a"],r=e("2877"),l=Object(r["a"])(a,n,s,!1,null,"ca91dd92",null);i["default"]=l.exports},e04e:function(t,i,e){"use strict";(function(t){e("a630"),e("d3b7"),e("07ac"),e("ac1f"),e("25f0"),e("6062"),e("3ca3"),e("5319"),e("ddb0");var n=e("315f"),s=e("cc8f"),o=e("1157"),a=e.n(o),r=e("2ef0"),l=e.n(r),u=e("9131");
/**
 * @license
 * Copyright 2020 Rodrigo Oshiro. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */i["a"]={name:"TSModelPredictor",components:{ComponentLayout:n["a"]},mixins:[s["a"]],data:function(){var t={serializable:["layerSize"],layerSize:0,fileChart:!1,scatterplot:!0,perClassAccuracy:!0,confusionMatrix:!0,toggleIcon:"caret-up"};return this.importData(t)},computed:{editActionDisabled:function(){var t=0;return t|=0===this.indexMax,1===t},trashActionDisabled:function(){return this.editActionDisabled},plugActionDisabled:function(){var t=0;return t|=!0===this.loading,t|=null===this.global.model,t|=null===this.inputData||void 0===this.inputData.normalizationData,t|=this.layerSize>this.indexMax,1===t},imageActionDisabled:function(){var t=0;return t|=!1===this.fileChart,1===t},indexMax:function(){var t=0;return this.global.model&&this.global.model.layers&&(t=this.global.model.layers.length),t}},watch:{inputLoading:function(t,i){!1===t&&this.trashAction()},indexMax:function(t,i){this.layerSize>t&&(this.layerSize=t)},loading:function(t,i){!1===t&&(delete this.$options.sockets.onerror,delete this.$options.sockets.onopen,delete this.$options.sockets.onmessage)}},methods:{onToggleToolbar:function(){"caret-up"===this.toggleIcon?this.toggleIcon="caret-down":"caret-down"===this.toggleIcon&&(this.toggleIcon="caret-up")},trashAction:function(t){a()(this.$refs["draw"]).empty(),this.fileChart=!1,this.scatterplot=!0,this.perClassAccuracy=!0,this.confusionMatrix=!0,void 0!==this.inputTensor&&(this.inputTensor.dispose(),delete this.inputTensor),void 0!==this.outputTensor&&(this.outputTensor.dispose(),delete this.outputTensor),this.output=null,this.loadData(this.data),this.loadData(this.component.data)},plugActionPost:function(i){var e=this.inputData.normalizationData,n=t[i.data["type"]].from(i.data["data"]);if(void 0!==this.predictTensor&&this.predictTensor.dispose(),this.predictTensor=this.$tf.tensor(n,i.shape),e.outputUnitsNormalize){var s=e.outputMin,o=e.outputMax,a=u["tasks"].unnormalizeTensor(this.$tf,this.predictTensor,s,o),r=a.unnormal;this.predictTensor.dispose(),this.predictTensor=r}var c=this.predictTensor.arraySync(),h=this.global.inputMatrix,d=l.a.cloneDeep(this.global.inputShape);null!==this.global.evaluation?h=this.global.evaluation.inputMatrix:null===this.global.evaluation&&null!==this.global.training&&(h=this.global.training.inputMatrix),d.unshift(h.length),void 0!==this.inputTensor&&this.inputTensor.dispose(),this.inputTensor=this.$tf.tensor(h,d);var p=this.global.outputMatrix,f=l.a.cloneDeep(this.global.outputShape);if(null!==this.global.evaluation?p=this.global.evaluation.outputMatrix:null===this.global.evaluation&&null!==this.global.training&&(p=this.global.training.outputMatrix),f.unshift(p.length),"sparseCategoricalCrossentropy"===this.global.loss){for(var g=0;g<p.length;g++){for(var v=parseInt(p[g][0]),b=[],x=0;x<this.predictTensor.shape[1];x++)b.push(v===x?1:0);p[g]=b}f=[p.length,this.predictTensor.shape[1]]}void 0!==this.outputTensor&&this.outputTensor.dispose(),this.outputTensor=this.$tf.tensor(p,f);var m=[],y=[];if(null!==this.global.labels)y=null!==this.global.evaluation?this.global.evaluation.labels:null===this.global.evaluation&&null!==this.global.training?this.global.training.labels:this.global.labels,m=Array.from(new Set(y));else for(var T=0;T<this.global.outputShape[0];T++)m.push(String(T));this.scatterplot=!1,this.perClassAccuracy=!1,this.confusionMatrix=!1;var k=this.inputTensor.shape[1]*this.outputTensor.shape[1]*this.predictTensor.shape[1];if(1===k){this.scatterplot=!0;for(var M=[],w=[],A=0;A<h.length;A++)M.push({x:h[A][0],y:p[A][0]}),w.push({x:h[A][0],y:c[A][0]});this.$tfvis.render.scatterplot(this.$refs["scatterplot"],{values:[M,w],series:["original","predicted"]},{width:700,height:450}),this.fileChart=!0}this.classNames=m,0!==m.length&&this.outputTensor.shape[1]===this.predictTensor.shape[1]?this.$tf.tidy(function(){var t=["perClassAccuracy","confusionMatrix"];this.perClassAccuracy=!0,this.$tfvis.metrics.perClassAccuracy(this.outputTensor.argMax(-1),this.predictTensor.argMax(-1)).then(function(i){this.$tfvis.show.perClassAccuracy(this.$refs["perClassAccuracy"],i,m),this.fileChart=!0,t.pop(),0===t.length&&(this.outputTensor.dispose(),this.predictTensor.dispose())}.bind(this)),this.confusionMatrix=!0,this.$tfvis.metrics.confusionMatrix(this.outputTensor.argMax(-1),this.predictTensor.argMax(-1)).then(function(i){this.$tfvis.render.confusionMatrix(this.$refs["confusionMatrix"],{values:i,tickLabels:m},{width:700,height:450}),this.fileChart=!0,t.pop(),0===t.length&&(this.outputTensor.dispose(),this.predictTensor.dispose())}.bind(this))}.bind(this)):(this.outputTensor.dispose(),this.predictTensor.dispose());for(var z=[],D=0;D<h.length;D++){for(var $=[],C=0;C<this.inputTensor.shape[1];C++)$.push(h[D][C]);for(var S=0;S<this.outputTensor.shape[1];S++)$.push(p[D][S]);for(var E=0;E<this.predictTensor.shape[1];E++)$.push(c[D][E]);0!==y.length&&$.push(y[D]),z.push($)}this.inputTensor.dispose(),this.output=z},plugActionEvent:function(t){this.fileChart=!1,this.scatterplot=!0,this.perClassAccuracy=!0,this.confusionMatrix=!0;var i=this.inputData.normalizationData,e=this.global.inputMatrix,n=l.a.cloneDeep(this.global.inputShape);null!==this.global.evaluation?e=this.global.evaluation.inputMatrix:null===this.global.evaluation&&null!==this.global.training&&(e=this.global.training.inputMatrix),n.unshift(e.length);var s=this.$tf.tensor(e,n);if(i.inputMin&&i.inputMax){var o=u["tasks"].normalizeTensor(this.$tf,s,i.inputMin,i.inputMax),a=o.normal;s.dispose(),s=a}var r=s.dataSync(),c={data:{type:r.constructor.toString().replace(/.* (.*)\(\)(.|\n)*/g,"$1"),data:Object.values(r)},shape:s.shape};s.dispose(),this.$options.sockets.onerror=function(){var t=new Worker("worker.js");t.onmessage=function(i){"onEnd"===i.data[0]&&i.error?(t.terminate(),this.plugActionEnd(i)):"onEnd"===i.data[0]&&(this.plugActionPost(i.data[1]),t.terminate(),this.plugActionEnd(i))}.bind(this),this.global.model.save("indexeddb://model").then(function(){t.postMessage(["predictor",this.$data,c])}.bind(this))}.bind(this),this.$options.sockets.onopen=function(){this.global.model.save(this.$tf.io.browserHTTPRequest("./api/model")).then(function(){this.$socket.sendObj({data:["predictor",this.$data,c]})}.bind(this))}.bind(this),this.$options.sockets.onmessage=function(t){var i=JSON.parse(t.data);"onEnd"===i.data[0]&&(this.plugActionPost(i.data[1]),this.$disconnect(),this.plugActionEnd(i))}.bind(this),this.$options.sockets.onerror()}}}}).call(this,e("c8ba"))},f183:function(t,i,e){var n=e("d012"),s=e("861d"),o=e("5135"),a=e("9bf2").f,r=e("90e3"),l=e("bb2f"),u=r("meta"),c=0,h=Object.isExtensible||function(){return!0},d=function(t){a(t,u,{value:{objectID:"O"+ ++c,weakData:{}}})},p=function(t,i){if(!s(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,u)){if(!h(t))return"F";if(!i)return"E";d(t)}return t[u].objectID},f=function(t,i){if(!o(t,u)){if(!h(t))return!0;if(!i)return!1;d(t)}return t[u].weakData},g=function(t){return l&&v.REQUIRED&&h(t)&&!o(t,u)&&d(t),t},v=t.exports={REQUIRED:!1,fastKey:p,getWeakData:f,onFreeze:g};n[u]=!0}}]);
//# sourceMappingURL=chunk-066aa483.9b549fdf.js.map