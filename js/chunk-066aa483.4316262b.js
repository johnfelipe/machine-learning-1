(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-066aa483"],{6062:function(t,e,i){"use strict";var n=i("6d61"),s=i("6566");t.exports=n("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),s)},6566:function(t,e,i){"use strict";var n=i("9bf2").f,s=i("7c73"),o=i("e2cc"),a=i("0366"),r=i("19aa"),l=i("2266"),u=i("7dd0"),c=i("2626"),h=i("83ab"),d=i("f183").fastKey,p=i("69f3"),f=p.set,v=p.getterFor;t.exports={getConstructor:function(t,e,i,u){var c=t((function(t,n){r(t,c,e),f(t,{type:e,index:s(null),first:void 0,last:void 0,size:0}),h||(t.size=0),void 0!=n&&l(n,t[u],t,i)})),p=v(e),b=function(t,e,i){var n,s,o=p(t),a=g(t,e);return a?a.value=i:(o.last=a={index:s=d(e,!0),key:e,value:i,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=a),n&&(n.next=a),h?o.size++:t.size++,"F"!==s&&(o.index[s]=a)),t},g=function(t,e){var i,n=p(t),s=d(e);if("F"!==s)return n.index[s];for(i=n.first;i;i=i.next)if(i.key==e)return i};return o(c.prototype,{clear:function(){var t=this,e=p(t),i=e.index,n=e.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete i[n.index],n=n.next;e.first=e.last=void 0,h?e.size=0:t.size=0},delete:function(t){var e=this,i=p(e),n=g(e,t);if(n){var s=n.next,o=n.previous;delete i.index[n.index],n.removed=!0,o&&(o.next=s),s&&(s.previous=o),i.first==n&&(i.first=s),i.last==n&&(i.last=o),h?i.size--:e.size--}return!!n},forEach:function(t){var e,i=p(this),n=a(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:i.first){n(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!g(this,t)}}),o(c.prototype,i?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return b(this,0===t?0:t,e)}}:{add:function(t){return b(this,t=0===t?0:t,t)}}),h&&n(c.prototype,"size",{get:function(){return p(this).size}}),c},setStrong:function(t,e,i){var n=e+" Iterator",s=v(e),o=v(n);u(t,e,(function(t,e){f(this,{type:n,target:t,state:s(t),kind:e,last:void 0})}),(function(){var t=o(this),e=t.kind,i=t.last;while(i&&i.removed)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?"keys"==e?{value:i.key,done:!1}:"values"==e?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),i?"entries":"values",!i,!0),c(e)}}},"6d61":function(t,e,i){"use strict";var n=i("23e7"),s=i("da84"),o=i("94ca"),a=i("6eeb"),r=i("f183"),l=i("2266"),u=i("19aa"),c=i("861d"),h=i("d039"),d=i("1c7e"),p=i("d44e"),f=i("7156");t.exports=function(t,e,i){var v=-1!==t.indexOf("Map"),b=-1!==t.indexOf("Weak"),g=v?"set":"add",m=s[t],x=m&&m.prototype,y=m,T={},k=function(t){var e=x[t];a(x,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(b&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return b&&!c(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(b&&!c(t))&&e.call(this,0===t?0:t)}:function(t,i){return e.call(this,0===t?0:t,i),this})};if(o(t,"function"!=typeof m||!(b||x.forEach&&!h((function(){(new m).entries().next()})))))y=i.getConstructor(e,t,v,g),r.REQUIRED=!0;else if(o(t,!0)){var w=new y,A=w[g](b?{}:-0,1)!=w,z=h((function(){w.has(1)})),D=d((function(t){new m(t)})),M=!b&&h((function(){var t=new m,e=5;while(e--)t[g](e,e);return!t.has(-0)}));D||(y=e((function(e,i){u(e,y,t);var n=f(new m,e,y);return void 0!=i&&l(i,n[g],n,v),n})),y.prototype=x,x.constructor=y),(z||M)&&(k("delete"),k("has"),v&&k("get")),(M||A)&&k(g),b&&x.clear&&delete x.clear}return T[t]=y,n({global:!0,forced:y!=m},T),p(y,t),b||i.setStrong(y,t,v),y}},7156:function(t,e,i){var n=i("861d"),s=i("d2bb");t.exports=function(t,e,i){var o,a;return s&&"function"==typeof(o=e.constructor)&&o!==i&&n(a=o.prototype)&&a!==i.prototype&&s(t,a),t}},a630:function(t,e,i){var n=i("23e7"),s=i("4df4"),o=i("1c7e"),a=!o((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:a},{from:s})},bb2f:function(t,e,i){var n=i("d039");t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},dd11:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("component-layout",{attrs:{component:t.component,length:t.length,loading:t.loading},on:{"update:component":function(e){t.component=e},"update:length":function(e){t.length=e},"update:loading":function(e){t.loading=e}}},[i("b-form",{staticClass:"form-toolbar-rtl",attrs:{inline:""}},[i("b-button",{attrs:{size:"badge",disabled:t.plugActionDisabled},on:{click:t.plugAction}},[i("b-icon",{staticClass:"btn-icon",attrs:{icon:"plug"}})],1),i("b-button",{attrs:{size:"badge",disabled:t.trashActionDisabled},on:{click:t.trashAction}},[i("b-icon",{staticClass:"btn-icon",attrs:{icon:"trash"}})],1),i("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"dataset-view-"+t.component.index,expression:"'dataset-view-' + component.index"}],attrs:{size:"badge",disabled:t.imageActionDisabled}},[i("b-icon",{staticClass:"btn-icon",attrs:{icon:"card-image"}})],1),i("b-button",{attrs:{size:"badge"},on:{click:t.onToggleToolbar}},[i("b-icon",{attrs:{icon:t.toggleIcon}})],1)],1),i("b-collapse",{attrs:{visible:"caret-up"===t.toggleIcon}},[i("b-form",{attrs:{inline:""}},[i("div",{staticClass:"indexInput"},[i("label",[t._v("Total Layers")]),i("b-form-spinbutton",{attrs:{min:"1",max:t.indexMax,placeholder:"--",disabled:t.editActionDisabled},model:{value:t.layerSize,callback:function(e){t.layerSize=e},expression:"layerSize"}})],1)])],1),i("div",{staticStyle:{"margin-top":"8px"}}),i("b-modal",{attrs:{id:"dataset-view-"+t.component.index,title:"Dataset View",static:!0,"hide-footer":!0,size:"lg"}},[i("b-carousel",{attrs:{interval:0,indicators:!0}},[t.scatterplot?i("b-carousel-slide",{attrs:{"img-blank":!0},scopedSlots:t._u([{key:"img",fn:function(){return[i("div",{ref:"scatterplot"})]},proxy:!0}],null,!1,2404327824)}):t._e(),t.perClassAccuracy?i("b-carousel-slide",{attrs:{"img-blank":!0},scopedSlots:t._u([{key:"img",fn:function(){return[i("div",{ref:"perClassAccuracy"})]},proxy:!0}],null,!1,3153054725)}):t._e(),t.confusionMatrix?i("b-carousel-slide",{attrs:{"img-blank":!0},scopedSlots:t._u([{key:"img",fn:function(){return[i("div",{ref:"confusionMatrix"})]},proxy:!0}],null,!1,3258938016)}):t._e()],1),i("footer",{staticClass:"modal-footer"})],1)],1)},s=[],o=i("e04e"),a=o["a"],r=i("2877"),l=Object(r["a"])(a,n,s,!1,null,"da85a916",null);e["default"]=l.exports},e04e:function(t,e,i){"use strict";(function(t){i("a630"),i("b0c0"),i("d3b7"),i("07ac"),i("6062"),i("3ca3"),i("ddb0"),i("2b3d");var n=i("315f"),s=i("cc8f"),o=i("1157"),a=i.n(o),r=i("2ef0"),l=i.n(r),u=i("9131");
/**
 * @license
 * Copyright 2020 Rodrigo Oshiro. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */e["a"]={name:"TSModelPredictor",components:{ComponentLayout:n["a"]},mixins:[s["a"]],data:function(){var t={serializable:["layerSize"],layerSize:0,fileChart:!1,scatterplot:!0,perClassAccuracy:!0,confusionMatrix:!0,toggleIcon:"caret-up"};return this.importData(t)},computed:{editActionDisabled:function(){var t=0;return t|=0===this.indexMax,1===t},trashActionDisabled:function(){return this.editActionDisabled},plugActionDisabled:function(){var t=0;return t|=!0===this.loading,t|=null===this.global.model,t|=null===this.inputData||void 0===this.inputData.normalizationData,t|=this.layerSize>this.indexMax,1===t},imageActionDisabled:function(){var t=0;return t|=!1===this.fileChart,1===t},indexMax:function(){var t=0;return this.global.model&&this.global.model.layers&&(t=this.global.model.layers.length),t}},watch:{inputLoading:function(t,e){!1===t&&this.trashAction()},indexMax:function(t,e){this.layerSize>t&&(this.layerSize=t)},loading:function(t,e){!1===t&&(delete this.$options.sockets.onerror,delete this.$options.sockets.onopen,delete this.$options.sockets.onmessage)}},methods:{onToggleToolbar:function(){"caret-up"===this.toggleIcon?this.toggleIcon="caret-down":"caret-down"===this.toggleIcon&&(this.toggleIcon="caret-up")},trashAction:function(t){a()(this.$refs["draw"]).empty(),this.fileChart=!1,this.scatterplot=!0,this.perClassAccuracy=!0,this.confusionMatrix=!0,this.inputTensor=null,this.outputTensor=null,this.output=null,this.loadData(this.data),this.loadData(this.component.data)},plugActionPost:function(e){var i=this.inputData.normalizationData,n=t[e.data["type"]].from(e.data["data"]);if(this.predictTensor=this.$tf.tensor(n,e.shape),Array.isArray(this.global.outputShape)){var s=null,o=l.a.cloneDeep(this.global.outputShape);null!==this.global.evaluation&&(s=this.global.evaluation.outputMatrix,o=l.a.cloneDeep(this.global.evaluation.outputShape)),o.unshift(s.length),this.outputTensor=this.$tf.tensor(s,o)}if(i.inputUnitsNormalize){var a=i.inputMin,r=i.inputMax,c=u["tasks"].unnormalizeTensor(this.$tf,this.inputTensor,a,r),h=c.unnormal;this.inputTensor.dispose(),this.inputTensor=h}if(i.outputUnitsNormalize){var d=i.outputMin,p=i.outputMax,f=u["tasks"].unnormalizeTensor(this.$tf,this.predictTensor,d,p),v=f.unnormal;this.predictTensor.dispose(),this.predictTensor=v}var b=this.inputTensor.arraySync(),g=this.outputTensor.arraySync(),m=this.predictTensor.arraySync(),x=[],y=[];if(null!==this.global.labels)y=null!=this.global.evaluation.labels?this.global.evaluation.labels:this.global.labels,x=Array.from(new Set(y));else for(var T=0;T<this.global.outputShape[0];T++)x.push(String(T));this.fileChart=!1,this.scatterplot=!1,this.perClassAccuracy=!1,this.confusionMatrix=!1;var k=this.inputTensor.shape[1]*this.outputTensor.shape[1]*this.predictTensor.shape[1];if(1===k){this.scatterplot=!0;for(var w=[],A=[],z=0;z<b.length;z++)w.push({x:b[z][0],y:g[z][0]}),A.push({x:b[z][0],y:m[z][0]});this.$tfvis.render.scatterplot(this.$refs["scatterplot"],{values:[w,A],series:["original","predicted"]},{width:700,height:450}),this.fileChart=!0}this.classNames=x,0!==x.length&&this.outputTensor.shape[1]===this.predictTensor.shape[1]?this.$tf.tidy(function(){var t=["perClassAccuracy","confusionMatrix"];this.perClassAccuracy=!0,this.$tfvis.metrics.perClassAccuracy(this.outputTensor.argMax(-1),this.predictTensor.argMax(-1)).then(function(e){this.$tfvis.show.perClassAccuracy(this.$refs["perClassAccuracy"],e,x),this.fileChart=!0,t.pop(),0===t.length&&(this.outputTensor.dispose(),this.predictTensor.dispose())}.bind(this)),this.confusionMatrix=!0,this.$tfvis.metrics.confusionMatrix(this.outputTensor.argMax(-1),this.predictTensor.argMax(-1)).then(function(e){this.$tfvis.render.confusionMatrix(this.$refs["confusionMatrix"],{values:e,tickLabels:x},{width:700,height:450}),this.fileChart=!0,t.pop(),0===t.length&&(this.outputTensor.dispose(),this.predictTensor.dispose())}.bind(this))}.bind(this)):(this.outputTensor.dispose(),this.predictTensor.dispose());for(var D=[],M=0;M<b.length;M++){for(var S=[],$=0;$<this.inputTensor.shape[1];$++)S.push(b[M][$]);for(var C=0;C<this.predictTensor.shape[1];C++)S.push(m[M][C]);0!==y.length&&S.push(y[M]),D.push(S)}this.inputTensor.dispose(),this.output=D},plugActionEvent:function(t){var e=this.inputData.normalizationData;if(Array.isArray(this.global.inputShape)){var i=null,n=l.a.cloneDeep(this.global.inputShape);null!==this.global.evaluation&&(i=this.global.evaluation.inputMatrix,n=l.a.cloneDeep(this.global.evaluation.inputShape)),n.unshift(i.length),this.inputTensor=this.$tf.tensor(i,n)}if(e.inputMin&&e.inputMax){var s=u["tasks"].normalizeTensor(this.$tf,this.inputTensor,e.inputMin,e.inputMax),o=s.normal;this.inputTensor.dispose(),this.inputTensor=o}var a=this.inputTensor.dataSync(),r={data:{type:a.constructor.name,data:Object.values(a)},shape:this.inputTensor.shape};this.$options.sockets.onerror=function(){var t=new Worker("worker.js");t.onmessage=function(e){"onEnd"===e.data[0]&&e.error?(t.terminate(),this.loading=!1):"onEnd"===e.data[0]&&(this.plugActionPost(e.data[1]),t.terminate(),this.loading=!1)}.bind(this),this.global.model.save("indexeddb://model").then(function(){t.postMessage(["predictor",this.$data,r])}.bind(this))}.bind(this),this.$options.sockets.onopen=function(){this.global.model.save(this.$tf.io.browserHTTPRequest("./api/model")).then(function(){this.$socket.sendObj({data:["predictor",this.$data,r]})}.bind(this))}.bind(this),this.$options.sockets.onmessage=function(t){var e=JSON.parse(t.data);"onEnd"===e.data[0]&&(this.plugActionPost(e.data[1]),this.$disconnect(),this.loading=!1)}.bind(this);var c=new URL("ws://localhost:8001").hostname,h=new URL(window.location.href).hostname;c===h?this.$connect():this.$options.sockets.onerror()}}}}).call(this,i("c8ba"))},f183:function(t,e,i){var n=i("d012"),s=i("861d"),o=i("5135"),a=i("9bf2").f,r=i("90e3"),l=i("bb2f"),u=r("meta"),c=0,h=Object.isExtensible||function(){return!0},d=function(t){a(t,u,{value:{objectID:"O"+ ++c,weakData:{}}})},p=function(t,e){if(!s(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,u)){if(!h(t))return"F";if(!e)return"E";d(t)}return t[u].objectID},f=function(t,e){if(!o(t,u)){if(!h(t))return!0;if(!e)return!1;d(t)}return t[u].weakData},v=function(t){return l&&b.REQUIRED&&h(t)&&!o(t,u)&&d(t),t},b=t.exports={REQUIRED:!1,fastKey:p,getWeakData:f,onFreeze:v};n[u]=!0}}]);
//# sourceMappingURL=chunk-066aa483.4316262b.js.map