{"version":3,"sources":["webpack:///./src/components/TSModelLoader.vue?1e4e","webpack:///src/components/TSModelLoader.vue","webpack:///./src/components/TSModelLoader.vue?6021","webpack:///./src/components/TSModelLoader.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","component","length","loading","on","$event","staticClass","model","value","callback","$$v","remoteFile","expression","selectRemoteFile","_v","staticRenderFns","name","components","mixins","mixin","data","serializable","utilities","importData","computed","plugActionDisabled","disabled","methods","$emit","inputUnitsNormalize","outputUnitsNormalize","global","training","inputMatrix","inputShape","unshift","inputTensor","$tf","tensor","outputMatrix","outputShape","outputTensor","normalizationData","dispose","normal","inputMin","min","inputMax","max","outputMin","outputMax","loadLayersModel","then","plugActionEvent","event"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,mBAAmB,CAACE,MAAM,CAAC,UAAYN,EAAIO,UAAU,OAASP,EAAIQ,OAAO,QAAUR,EAAIS,SAASC,GAAG,CAAC,mBAAmB,SAASC,GAAQX,EAAIO,UAAUI,GAAQ,gBAAgB,SAASA,GAAQX,EAAIQ,OAAOG,GAAQ,iBAAiB,SAASA,GAAQX,EAAIS,QAAQE,KAAU,CAACP,EAAG,gBAAgB,CAACQ,YAAY,QAAQ,CAACR,EAAG,eAAe,CAACE,MAAM,CAAC,YAAc,kCAAkCO,MAAM,CAACC,MAAOd,EAAc,WAAEe,SAAS,SAAUC,GAAMhB,EAAIiB,WAAWD,GAAKE,WAAW,gBAAgBd,EAAG,uBAAuB,CAACA,EAAG,WAAW,CAACQ,YAAY,gBAAgBF,GAAG,CAAC,MAAQV,EAAImB,mBAAmB,CAACnB,EAAIoB,GAAG,yBAAyB,IAAI,IAAI,IACrtBC,EAAkB,G,qECgCtB,GACEC,KAAM,gBACNC,WAAY,CAAd,wBACEC,OAAQ,CAACC,EAAX,MACEC,KAJF,WAKI,IAAJ,GACMC,aAAc,CAAC,cACfV,WAAY,KACZW,UAAWA,GAEb,OAAO3B,KAAK4B,WAAWH,IAEzBI,SAAU,CACRC,mBADJ,WAEM,IAAN,IAEM,OADAC,IAA6B,IAAjB/B,KAAKQ,QACG,IAAbuB,IAGXC,QAAS,CACPd,iBADJ,WAEMlB,KAAKQ,SAAU,EACfR,KAAKiC,MAAM,eAAgBjC,KAAKQ,SAEhC,IAAN,OACA,OACA,0BACA,2BACA,GACQ0B,qBAAqB,EACrBC,sBAAsB,GAG9B,wCACmC,OAAzBnC,KAAKoC,OAAOC,WACdC,EAActC,KAAKoC,OAAOC,SAASC,aAErCC,EAAWC,QAAQF,EAAY/B,QAC/BkC,EAAczC,KAAK0C,IAAIC,OAAOL,EAAaC,GAE3C,IAAN,yCAOM,GAN6B,OAAzBvC,KAAKoC,OAAOC,WACdO,EAAe5C,KAAKoC,OAAOC,SAASO,cAEtCC,EAAYL,QAAQI,EAAarC,QACjCuC,EAAe9C,KAAK0C,IAAIC,OAAOC,EAAcC,GAEzCE,EAAkBb,oBAAqB,CAAjD,MACA,yCADA,EACA,SADA,EACA,MADA,EACA,IACQO,EAAYO,UACZP,EAAcQ,EACdF,EAAkBG,SAAWC,EAC7BJ,EAAkBK,SAAWC,EAE/B,GAAIN,EAAkBZ,qBAAsB,CAAlD,MACA,yCADA,EACA,SADA,EACA,MADA,EACA,IACQW,EAAaE,UACbF,EAAe,EACfC,EAAkBO,UAAY,EAC9BP,EAAkBQ,UAAY,EAEhCd,EAAYO,UACZF,EAAaE,UAEbhD,KAAK0C,IAAIc,gBAAgBxD,KAAKgB,YAAYyC,KAChD,YACQ,KAAR,eACQ,KAAR,wCACA,gBADA,IAEU,kBAAV,IAEQ,KAAR,sBACA,aAGIC,gBAxDJ,SAwDA,GACM1D,KAAKkB,iBAAiByC,MC7G2T,I,YCOnVrD,EAAY,eACd,EACAR,EACAsB,GACA,EACA,KACA,WACA,MAIa,aAAAd,E","file":"js/chunk-2d0b9d1a.afffe25c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('component-layout',{attrs:{\"component\":_vm.component,\"length\":_vm.length,\"loading\":_vm.loading},on:{\"update:component\":function($event){_vm.component=$event},\"update:length\":function($event){_vm.length=$event},\"update:loading\":function($event){_vm.loading=$event}}},[_c('b-input-group',{staticClass:\"mb-2\"},[_c('b-form-input',{attrs:{\"placeholder\":\"Choose a remote web address...\"},model:{value:(_vm.remoteFile),callback:function ($$v) {_vm.remoteFile=$$v},expression:\"remoteFile\"}}),_c('b-input-group-append',[_c('b-button',{staticClass:\"select-button\",on:{\"click\":_vm.selectRemoteFile}},[_vm._v(\"Select remote file\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <component-layout :component.sync=\"component\" :length.sync=\"length\" :loading.sync=\"loading\">\n    <b-input-group class=\"mb-2\">\n      <b-form-input v-model=\"remoteFile\" placeholder=\"Choose a remote web address...\"></b-form-input>\n      <b-input-group-append>\n        <b-button class=\"select-button\" @click=\"selectRemoteFile\">Select remote file</b-button>\n      </b-input-group-append>\n    </b-input-group>\n  </component-layout>\n</template>\n\n<script>\n/**\n * @license\n * Copyright 2020 Rodrigo Oshiro. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport ComponentLayout from './ComponentLayout'\nimport { mixin } from './mixin'\nimport lodash from 'lodash'\nimport * as utilities from '../config/utilities.js'\n\nexport default {\n  name: 'TSModelLoader',\n  components: { ComponentLayout },\n  mixins: [mixin],\n  data() {\n    let data = {\n      serializable: ['remoteFile'],\n      remoteFile: null,\n      utilities: utilities\n    }\n    return this.importData(data)\n  },\n  computed: {\n    plugActionDisabled() {\n      let disabled = 0\n      disabled |= this.loading === true\n      return disabled === 1\n    }\n  },\n  methods: {\n    selectRemoteFile() {\n      this.loading = true\n      this.$emit('onPlugAction', this.loading)\n\n      let inputTensor = null\n      let outputTensor = null\n      let inputMatrix = this.global.inputMatrix\n      let outputMatrix = this.global.outputMatrix\n      let normalizationData = {\n        inputUnitsNormalize: true,\n        outputUnitsNormalize: true\n      }\n\n      let inputShape = lodash.cloneDeep(this.global.inputShape)\n      if (this.global.training !== null) {\n        inputMatrix = this.global.training.inputMatrix\n      }\n      inputShape.unshift(inputMatrix.length)\n      inputTensor = this.$tf.tensor(inputMatrix, inputShape)\n\n      let outputShape = lodash.cloneDeep(this.global.outputShape)\n      if (this.global.training !== null) {\n        outputMatrix = this.global.training.outputMatrix\n      }\n      outputShape.unshift(outputMatrix.length)\n      outputTensor = this.$tf.tensor(outputMatrix, outputShape)\n\n      if (normalizationData.inputUnitsNormalize) {\n        let { normal, min, max } = utilities.tasks.normalizeTensor(this.$tf, inputTensor)\n        inputTensor.dispose()\n        inputTensor = normal\n        normalizationData.inputMin = min\n        normalizationData.inputMax = max\n      }\n      if (normalizationData.outputUnitsNormalize) {\n        let { normal, min, max } = utilities.tasks.normalizeTensor(this.$tf, outputTensor)\n        outputTensor.dispose()\n        outputTensor = normal\n        normalizationData.outputMin = min\n        normalizationData.outputMax = max\n      }\n      inputTensor.dispose()\n      outputTensor.dispose()\n\n      this.$tf.loadLayersModel(this.remoteFile).then(\n        function(model) {\n          this.global.model = model\n          this.output = {\n            ...this.inputData,\n            normalizationData: normalizationData\n          }\n          this.plugActionEnd(event)\n        }.bind(this)\n      )\n    },\n    plugActionEvent(event) {\n      this.selectRemoteFile(event)\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TSModelLoader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TSModelLoader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TSModelLoader.vue?vue&type=template&id=da1c79de&scoped=true&\"\nimport script from \"./TSModelLoader.vue?vue&type=script&lang=js&\"\nexport * from \"./TSModelLoader.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"da1c79de\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}