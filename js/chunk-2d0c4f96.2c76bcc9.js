(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c4f96"],{"3cb2":function(t,i,e){"use strict";e.r(i);var o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("component-layout",{attrs:{component:t.component,length:t.length,loading:t.loading},on:{"update:component":function(i){t.component=i},"update:length":function(i){t.length=i},"update:loading":function(i){t.loading=i}}},[e("b-form",{staticClass:"form-toolbar-rtl",attrs:{inline:""}},[e("b-button",{attrs:{size:"badge",disabled:t.plugActionDisabled},on:{click:t.plugAction}},[e("b-icon",{staticClass:"btn-icon",attrs:{icon:"plug"}})],1),e("b-button",{attrs:{size:"badge",disabled:t.trashActionDisabled},on:{click:t.trashAction}},[e("b-icon",{staticClass:"btn-icon",attrs:{icon:"trash"}})],1),e("b-button",{attrs:{size:"badge",disabled:t.imageActionDisabled},on:{click:function(i){return t.$bvModal.show("model-view-"+t.component.index)}}},[e("b-icon",{staticClass:"btn-icon",attrs:{icon:"card-image"}})],1),e("b-button",{attrs:{size:"badge"},on:{click:t.onToggleToolbar}},[e("b-icon",{attrs:{icon:t.toggleIcon}})],1)],1),e("b-collapse",{attrs:{visible:"caret-up"===t.toggleIcon}},[e("b-form",{attrs:{inline:""}},[e("div",{staticClass:"indexInput"},[e("label",[t._v("Compiler Optimizer")]),e("b-form-select",{attrs:{options:t.utilities.tf.train.options,disabled:t.editActionDisabled},model:{value:t.compilerOptimizerSelected,callback:function(i){t.compilerOptimizerSelected=i},expression:"compilerOptimizerSelected"}})],1),e("div",{staticClass:"indexInput"},[e("label",[t._v("Compiler Loss")]),e("b-form-select",{attrs:{options:t.utilities.tf.losses.options,disabled:t.editActionDisabled},model:{value:t.compilerLossSelected,callback:function(i){t.compilerLossSelected=i},expression:"compilerLossSelected"}})],1),e("div",{staticClass:"indexInput"},[e("label",[t._v("Input Units Normalize")]),e("b-form-select",{attrs:{options:[!0,!1],disabled:t.editActionDisabled},model:{value:t.inputUnitsNormalize,callback:function(i){t.inputUnitsNormalize=i},expression:"inputUnitsNormalize"}})],1),e("div",{staticClass:"indexInput"},[e("label",[t._v("Output Units Normalize")]),e("b-form-select",{attrs:{options:[!0,!1],disabled:t.editActionDisabled},model:{value:t.outputUnitsNormalize,callback:function(i){t.outputUnitsNormalize=i},expression:"outputUnitsNormalize"}})],1),e("div",{staticClass:"indexInput"},[e("label",[t._v("Shuffle")]),e("b-form-select",{attrs:{options:[!0,!1],disabled:t.editActionDisabled},model:{value:t.shuffle,callback:function(i){t.shuffle=i},expression:"shuffle"}})],1)]),e("b-form",{attrs:{inline:""}},[e("div",{staticClass:"indexInput"},[e("label",[t._v("Epochs")]),e("b-form-spinbutton",{attrs:{min:"1",max:"9999","formatter-fn":t.positiveFormatter,disabled:t.editActionDisabled},model:{value:t.epochs,callback:function(i){t.epochs=i},expression:"epochs"}})],1),e("div",{staticClass:"indexInput"},[e("label",[t._v("Batch Size")]),e("b-form-spinbutton",{attrs:{min:"0",max:"9999","formatter-fn":t.positiveFormatter,disabled:t.editActionDisabled},model:{value:t.batchSize,callback:function(i){t.batchSize=i},expression:"batchSize"}})],1),e("div",{staticClass:"indexInput"},[e("label",[t._v("Steps Per Epoch")]),e("b-form-spinbutton",{attrs:{min:"0",max:"9999","formatter-fn":t.positiveFormatter,disabled:t.editActionDisabled},model:{value:t.stepsPerEpoch,callback:function(i){t.stepsPerEpoch=i},expression:"stepsPerEpoch"}})],1),e("div",{staticClass:"indexInput"},[e("label",[t._v("Validation Steps")]),e("b-form-spinbutton",{attrs:{min:"0",max:"9999","formatter-fn":t.positiveFormatter,disabled:t.editActionDisabled},model:{value:t.validationSteps,callback:function(i){t.validationSteps=i},expression:"validationSteps"}})],1),e("div",{staticClass:"indexInput"},[e("label",[t._v("Validation Split")]),e("b-form-spinbutton",{attrs:{min:"0.0",max:"1.0",step:"0.01","formatter-fn":t.percentageFormatter,disabled:t.editActionDisabled},model:{value:t.validationSplit,callback:function(i){t.validationSplit=i},expression:"validationSplit"}})],1)])],1),e("div",{staticStyle:{"margin-top":"8px"}}),e("b-modal",{ref:"modal",attrs:{id:"model-view-"+t.component.index,title:"TS Model View",static:!0,"hide-footer":!0,size:"lg"}},[e("div",{ref:"draw"})])],1)},s=[],a=(e("d3b7"),e("07ac"),e("ac1f"),e("25f0"),e("5319"),e("5530")),n=e("315f"),l=e("cc8f"),r=e("1157"),c=e.n(r),d=e("2ef0"),p=e.n(d),u=e("9131"),h={name:"TSModelCompiler",components:{ComponentLayout:n["a"]},mixins:[l["a"]],data:function(){var t={serializable:["shuffle","epochs","batchSize","stepsPerEpoch","validationSteps","validationSplit","inputUnitsNormalize","outputUnitsNormalize","compilerOptimizerSelected","compilerLossSelected"],toggleIcon:"caret-up",utilities:u,shuffle:!0,epochs:0,batchSize:1,stepsPerEpoch:0,validationSteps:0,validationSplit:0,inputUnitsNormalize:!1,outputUnitsNormalize:!1,compilerOptimizerSelected:null,compilerLossSelected:null,fileChart:!1};return this.importData(t)},computed:{editActionDisabled:function(){var t=0;return t|=!0===this.loading,t|=null===this.global.model,t|=null===this.global.inputShape,1===t},trashActionDisabled:function(){return this.editActionDisabled},plugActionDisabled:function(){return this.editActionDisabled},imageActionDisabled:function(){var t=0;return t|=!1===this.fileChart,1===t}},watch:{loading:function(t,i){!1===t&&(delete this.$options.sockets.onerror,delete this.$options.sockets.onopen,delete this.$options.sockets.onmessage)}},methods:{onToggleToolbar:function(){"caret-up"===this.toggleIcon?this.toggleIcon="caret-down":"caret-down"===this.toggleIcon&&(this.toggleIcon="caret-up")},trashActionEvent:function(t){c()(this.$refs["draw"]).empty(),this.fileChart=!1,this.output=null},plugActionEvent:function(t){var i=null,e=null,o=this.global.inputMatrix,s=this.global.outputMatrix,n={inputUnitsNormalize:this.inputUnitsNormalize,outputUnitsNormalize:this.outputUnitsNormalize},l=p.a.cloneDeep(this.global.inputShape);null!==this.global.training&&(o=this.global.training.inputMatrix),l.unshift(o.length),i=this.$tf.tensor(o,l);var r=p.a.cloneDeep(this.global.outputShape);if(null!==this.global.training&&(s=this.global.training.outputMatrix),r.unshift(s.length),e=this.$tf.tensor(s,r),this.global.loss=this.compilerLossSelected,this.inputUnitsNormalize){var c=u["tasks"].normalizeTensor(this.$tf,i),d=c.normal,h=c.min,b=c.max;i.dispose(),i=d,n.inputMin=h,n.inputMax=b}if(this.outputUnitsNormalize){var m=u["tasks"].normalizeTensor(this.$tf,e),f=m.normal,g=m.min,v=m.max;e.dispose(),e=f,n.outputMin=g,n.outputMax=v}var S=this.$tfvis.show.fitCallbacks(this.$refs["draw"],["loss","mse"],{width:700,height:200,callbacks:["onEpochEnd"]}),x=i.dataSync(),z={data:{type:x.constructor.toString().replace(/.* (.*)\(\)(.|\n)*/g,"$1"),data:Object.values(x)},shape:i.shape},k=e.dataSync(),$={data:{type:k.constructor.toString().replace(/.* (.*)\(\)(.|\n)*/g,"$1"),data:Object.values(k)},shape:e.shape};this.$options.sockets.onerror=function(){var t=new Worker("worker.js");t.onmessage=function(i){"onEnd"===i.data[0]&&i.error?(t.terminate(),this.plugActionEnd(i)):"onEnd"===i.data[0]?(this.$tfvis.show.history(this.$refs["draw"],i.data[1],["loss","mse"],{width:700,height:200}),this.$tf.loadLayersModel("indexeddb://model").then(function(e){this.global.model.dispose(),this.global.model=e,this.output=Object(a["a"])(Object(a["a"])({},this.inputData),{},{history:i.data[1],normalizationData:n}),t.terminate(),this.plugActionEnd(i)}.bind(this))):"onError"===i.data[0]?(console.error(i.data[1]),t.terminate(),this.plugActionEnd(i)):(this.fileChart=!0,this.$refs["modal"].isShow&&S[i.data[0]](i.data[1],i.data[2]))}.bind(this),this.global.model.save("indexeddb://model").then(function(){t.postMessage(["compiler",this.getData(),z,$]),i.dispose(),e.dispose()}.bind(this))}.bind(this),this.$options.sockets.onopen=function(){this.global.model.save(this.$tf.io.browserHTTPRequest("./api/model")).then(function(){this.$socket.sendObj({data:["compiler",this.getData(),z,$]}),i.dispose(),e.dispose()}.bind(this))}.bind(this),this.$options.sockets.onmessage=function(t){var i=JSON.parse(t.data);"onEnd"===i.data[0]?(this.$tfvis.show.history(this.$refs["draw"],i.data[1],["loss","mse"],{width:700,height:200}),this.$tf.loadLayersModel("./api/model/model.json").then(function(t){this.global.model.dispose(),this.global.model=t,this.output=Object(a["a"])(Object(a["a"])({},this.inputData),{},{history:i.data[1],normalizationData:n}),this.$disconnect(),this.plugActionEnd(i)}.bind(this))):"onError"===i.data[0]?(console.error(i.data[1]),this.$disconnect(),this.plugActionEnd(i)):(this.fileChart=!0,this.$refs["modal"].isShow&&S[i.data[0]](i.data[1],i.data[2]))}.bind(this),this.$options.sockets.onerror()}}},b=h,m=e("2877"),f=Object(m["a"])(b,o,s,!1,null,"7f8e0034",null);i["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d0c4f96.2c76bcc9.js.map